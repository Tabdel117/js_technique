## é™æ€æˆå‘˜
ç›®çš„æ˜¯å°†å’Œ**æŸäº›ç±»ç´§å¯†ç›¸å…³çš„**ä½†å’Œ**å®ä¾‹æ— å…³**ä½†å…¨å±€å˜é‡å’Œå‡½æ•°å†™åˆ°ç±»é‡Œé¢   
åŒ…æ‹¬é™æ€æˆå‘˜å‡½æ•°/é™æ€æˆå‘˜å˜é‡ï¼Œä½¿ç”¨`static`å…³é”®å­—å£°æ˜ï¼Œä¸ºæ‰€æœ‰å¯¹è±¡æ‰€å…±äº«ï¼ˆæœ¬è´¨æ˜¯å…¨å±€å˜é‡å’Œå…¨å±€å‡½æ•°ï¼‰ï¼Œ`sizeof`è¿ç®—ç¬¦ä¸ä¼šè®¡ç®—é™æ€æˆå‘˜å˜é‡  
è®¿é—®æ–¹å¼:
- `ç±»å`::`é™æ€æˆå‘˜å`
- `å¯¹è±¡å`.`é™æ€æˆå‘˜å`
- `æŒ‡é’ˆ`->`é™æ€æˆå‘˜å`

é™æ€æˆå‘˜å‡½æ•°æ²¡æœ‰`this`æŒ‡é’ˆï¼Œä¸èƒ½å¼•ç”¨éé™æ€æˆå‘˜  
ç±»çš„é™æ€æˆå‘˜å˜é‡å¿…é¡»åœ¨æ–‡ä»¶ä¸­è¿›è¡Œä¸€æ¬¡è¯´æ˜æˆ–è€…åˆå§‹åŒ–ï¼Œå¦åˆ™ç¼–è¯‘èƒ½é€šè¿‡ï¼Œé“¾æ¥ä¸èƒ½é€šè¿‡ã€‚  
ps:æˆ‘ç†è§£é™æ€æˆå‘˜å‡½æ•°æ›´å¤šæ˜¯ä¸ºå¯¹é™æ€æˆå‘˜å˜é‡æ“ä½œæä¾›æ¥å£ï¼Ÿ 
## é™æ€æˆå‘˜å˜é‡çš„æŒ‡é’ˆ
æ˜¯è¿™ä¸ª[é—®é¢˜](https://stackoverflow.com/questions/11490170/pointer-to-static-member-variable)è®¨è®ºçš„ç±»é™æ€å˜é‡éœ€è¦åˆå§‹åŒ–å—ï¼Ÿ 
è¿˜æ˜¯å¯¹äºç±»çš„æŸä¸ªé™æ€å˜é‡æ˜¯æŒ‡é’ˆçš„å†…å­˜é‡Šæ”¾é—®é¢˜ï¼Ÿ
## ä¸´æ—¶å¯¹è±¡
ç›´æ¥è°ƒç”¨(ä»£ç ä¸Šæ‰‹åŠ¨å»è°ƒç”¨è€Œéç¼–è¯‘å™¨è‡ªå·±è°ƒç”¨)æ„é€ å‡½æ•°å°†ä¼šäº§ç”Ÿä¸€ä¸ªä¸´æ—¶å¯¹è±¡  
- ä½¿ç”¨å‰ç½®é€’å¢æ¥å®ç°åç½®é€’å¢
- åœ¨ä¼ é€’å¯¹è±¡å‚æ•°æ—¶ï¼Œé€‰æ‹©å¼•ç”¨æ–¹å¼è€Œä¸æ˜¯ä¼ å€¼æ–¹å¼
- ä¸è¦åœ¨å‡½æ•°å®å‚ä¸­åˆ›å»ºshared_ptrï¼ŒæŠ›å¼ƒä¸´æ—¶å¯¹è±¡ï¼Œè®©æ‰€æœ‰çš„æ™ºèƒ½æŒ‡é’ˆéƒ½æœ‰åå­—
## æ‹·è´æ„é€ å‡½æ•°
è°ƒç”¨çš„åœºæ™¯
- ä¸€ä¸ªå¯¹è±¡ä»¥å€¼ä¼ é€’æ–¹å¼ä¼ å…¥å‡½æ•°ä½“
- ä¸€ä¸ªå¯¹è±¡ä»¥å€¼ä¼ é€’çš„æ–¹å¼ä»å‡½æ•°è¿”å›
- ä¸€ä¸ªå¯¹è±¡éœ€è¦é€šè¿‡å¦å¤–ä¸€ä¸ªå¯¹è±¡è¿›è¡Œåˆå§‹åŒ–
## è¿ç®—ç¬¦é‡è½½
ä¸èƒ½è¢«é‡è½½çš„è¿ç®—ç¬¦`.`  `.*` `::` `?:` `sizeof`  
åªèƒ½ä½œä¸ºç±»æˆå‘˜å‡½æ•°é‡è½½çš„è¿ç®—ç¬¦ `()` `[]` `->` `=`  
 
é‡è½½æœ‰æˆå‘˜å‡½æ•°å’Œå‹å…ƒå‡½æ•°ä¸¤ç§å½¢å¼ï¼Œå·®åˆ«æ˜¯æˆå‘˜å‡½æ•°çš„å°‘ä¸€ä¸ªå‚æ•°ä¸”æœ‰`this`ï¼ˆå¦‚äºŒå…ƒè¿ç®—ç¬¦åˆ™æˆå‘˜å‡½æ•°ä¸€ä¸ªå‚æ•°ï¼Œå‹å…ƒå‡½æ•°ä¸¤ä¸ªå‚æ•°ï¼‰
1. æˆå‘˜å‡½æ•°
``` c++
class CA
{
    public:
    template<class RightType> 
    CA& operator << (const RightType& right)
    {
        //...
            return *this;
    }

    template<class RightType>
    CA& operator >>(RightType& right)
    {
        //...
        return *this;
    }
};
```
2. æ™®é€šå‡½æ•°
``` c++
template<class LeftType,  class RightType>  
LeftType& operator << (LeftType& left, const RightType& right)
{
    //...
    return left;
}

template<class LeftType,  class RightType>  
LeftType& operator >> (LeftType& left, RightType& right)
{
    //...
    return left;
}
```
å…³äºè¾“å…¥è¾“å‡ºç±»å‹ï¼Œæˆ‘æ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼š
- å‡½æ•°çš„è¿”å›ç±»å‹å¯ä»¥å’Œå‡½æ•°çš„å…¥å‚ç±»å‹ä¸ä¸€è‡´ï¼Œä½†æ¯”å¦‚èµ‹å€¼è¿ç®—ç¬¦`+=`çš„è¿”å›ç±»å‹å’Œç¬¬ä¸€ä¸ªå‚æ•°ç±»å‹ä¸€è‡´
- è‹¥è¿”å›å€¼å¯ä»¥åšå·¦å€¼ä¸”è¿›è¡Œè¿ç»­è¿ç®—æ“ä½œï¼Œåˆ™éœ€è¦è¿”å›å¼•ç”¨ç±»å‹ï¼Œå¦‚æµè¿ç®—ç¬¦`<<`å’Œ`>>`ï¼Œèµ‹å€¼è¿ç®—ç¬¦`=`ï¼›è‹¥è¿ç®—ç»“æœå’Œè¾“å…¥çš„æ•°æ®å¹¶ä¸æ˜¯ç›¸åŒçš„å¯¹è±¡ï¼Œè€Œæ˜¯ä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼Œåˆ™è¿”å›æ™®é€šç±»å‹è€Œéå¼•ç”¨ç±»å‹ï¼Œå¦‚æ‰€æœ‰çš„ç®—æœ¯è¿ç®—ç¬¦ï¼›ç±»å‹è½¬æ¢è¿ç®—ç¬¦ä¸éœ€è¦æŒ‡å®šè¿”å›ç±»å‹
- è‹¥è¿ç®—ç¬¦ä¼šæ”¹å˜å€¼ï¼Œåˆ™ä¼ å…¥å‚æ•°ä¸º**å¼•ç”¨**ç±»å‹ï¼Œå¦‚æµè¿ç®—ç¬¦`>>`çš„å³å€¼ï¼Œå‰ç¼€å’Œåç¼€çš„è‡ªå¢è¿ç®—ç¬¦`++`ï¼›è‹¥ä¸ä¼šæ”¹å˜å€¼ï¼Œåˆ™ä¼ å…¥å‚æ•°ä¸º**å¸¸é‡å¼•ç”¨**ç±»å‹ï¼ˆè¿™ç§æƒ…å†µæœ€å¸¸è§ï¼‰ï¼Œå¦‚æµè¿ç®—ç¬¦`<<`çš„å³å€¼ã€ç®—æœ¯è¿ç®—ç¬¦`+ -`ã€èµ‹å€¼è¿ç®—ç¬¦`-= +=`ã€æ¯”è¾ƒè¿ç®—ç¬¦`== !=`

### èµ‹å€¼è¿ç®—ç¬¦
åªèƒ½æ˜¯ç±»çš„éé™æ€æˆå‘˜å‡½æ•°ï¼Œä¸èƒ½è¢«ç»§æ‰¿
``` c++
class T {
    public T& operator =(const T& t) { //é¿å…åœ¨å‡½æ•°è°ƒç”¨æ—¶å¯¹å®å‚çš„ä¸€æ¬¡æ‹·è´ï¼›ä¸å¸Œæœ›åœ¨è¿™ä¸ªå‡½æ•°ä¸­å¯¹ç”¨æ¥è¿›è¡Œèµ‹å€¼çš„åŸç‰ˆåšä»»ä½•ä¿®æ”¹
        ...
        return *this; // åœ¨å‡½æ•°è¿”å›æ—¶é¿å…è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼Œæé«˜æ•ˆç‡ï¼›å®ç°è¿ç»­èµ‹å€¼
    }

}
```
### ç®—æœ¯è¿ç®—ç¬¦
``` c++
class CA
{
     public:

     template<class ReturnType, class RightType>
      ReturnType operator + (const RightType& right) const
     {
           //...
            return ä¸€ä¸ªæ–°çš„ReturnTypeç±»å‹å¯¹è±¡ã€‚
      }

      //å–åè¿ç®—ç¬¦æ˜¯ä¸€ä¸ªä¸€å…ƒè¿ç®—ç¬¦ã€‚
     template<class ReturnType>
      ReturnType operator  ~ () const
     {
           //...
            return ä¸€ä¸ªæ–°çš„ReturnTypeç±»å‹å¯¹è±¡ã€‚
      }
};

```

### è‡ªå¢è¿ç®—ç¬¦
``` c++
class CA
{
     public:

     CA& operator  ++ (int) // å¸¦intä¸ºå‰ç¼€ï¼Œè¿”å›å€¼å¯ä»¥åšå·¦å€¼
     {
           //...
            return *this;
      }

    CA operator ++ () // åç¼€ï¼Œè¿”å›å€¼ä¸èƒ½åšå·¦å€¼
     {
           //...
            return æ–°çš„CAç±»å‹å€¼
      }
};
```
### * & -> è¿ç®—ç¬¦
ç”¨äºæ™ºèƒ½æŒ‡é’ˆä»¥åŠä»£ç†çš„å®ç°
## castå®‰å…¨å¼ºåˆ¶ç±»å‹è½¬æ¢
ä¸­æ–‡ç¿»è¯‘å¤ªå·®ï¼Œå»ºè®®ç›´æ¥çœ‹è‹±æ–‡ç‰ˆğŸ‘‰ [Explicit conversions (casts)](https://docs.microsoft.com/en-us/cpp/cpp/type-conversions-and-type-safety-modern-cpp?view=vs-2019#explicit-conversions-casts)
- [static_cast](https://docs.microsoft.com/en-us/cpp/cpp/static-cast-operator?view=vs-2019)
- [dynamic_cast](https://docs.microsoft.com/en-us/cpp/cpp/dynamic-cast-operator?view=vs-2019)
- [const_cast](https://docs.microsoft.com/en-us/cpp/cpp/const-cast-operator?view=vs-2019)
- [reinterpret_cast](https://docs.microsoft.com/en-us/cpp/cpp/reinterpret-cast-operator?view=vs-2019)

`cast-name<type-id>(expression)`  
### static_cast
ç¼–è¯‘æ—¶ç±»å‹æ ¡éªŒï¼Œä¿ç•™`const`, `volatile`å’Œ `__unaligned`å±æ€§
- ç”¨äºåŸºç±»ï¼ˆçˆ¶ç±»ï¼‰å’Œæ´¾ç”Ÿç±»ï¼ˆå­ç±»ï¼‰ä¹‹é—´æŒ‡é’ˆæˆ–å¼•ç”¨çš„è½¬æ¢ï¼šè¿›è¡Œä¸Šè¡Œè½¬æ¢ï¼ˆæ´¾ç”Ÿç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨->åŸºç±»ï¼‰æ˜¯å®‰å…¨çš„ï¼›è¿›è¡Œä¸‹è¡Œè½¬æ¢ï¼ˆåŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨->æ´¾ç”Ÿç±»ï¼‰æ—¶ï¼Œç”±äºæ²¡æœ‰runtimeç±»å‹æ£€æŸ¥ï¼Œæ‰€ä»¥ä¸å®‰å…¨çš„  
- ç”¨äºåŸºæœ¬æ•°æ®ç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼Œå¦‚æŠŠintè½¬æ¢æˆcharï¼ŒæŠŠintè½¬æ¢æˆenumã€‚è¿™ç§è½¬æ¢çš„å®‰å…¨æ€§ä¹Ÿè¦å¼€å‘äººå‘˜æ¥ä¿è¯ï¼Œå¦‚æœè¶…è¿‡å…è®¸èŒƒå›´åˆ™ä¸º`undefined`
- æŠŠç©ºæŒ‡é’ˆè½¬æ¢æˆç›®æ ‡ç±»å‹çš„ç©ºæŒ‡é’ˆ  
- æŠŠä»»ä½•ç±»å‹çš„è¡¨è¾¾å¼è½¬æ¢æˆ`void`ç±»å‹ã€‚
### dynamic_cast
ä¸`static_cast`å·®åˆ«æ˜¯æ”¯æŒè¿è¡Œæ—¶ç±»å‹æ ¡éªŒï¼Œæ›´å®‰å…¨ï¼›`type-id`å¿…é¡»æ˜¯ç±»çš„**æŒ‡é’ˆ**ã€ç±»çš„**å¼•ç”¨**æˆ–è€…`void*`
``` c++
class B {virtual void f();};
class D : public B {virtual void f();};

void f() {
   B* pb = new D;   // unclear but ok
   B* pb2 = new B;

   D* pd = dynamic_cast<D*>(pb);   // ok: pb actually points to a D ä¼šåšä¸€ä¸‹runtimeæ£€æµ‹ï¼Œå‘ç°pbç¡®å®æ˜¯æŒ‡å‘D
   D* pd2 = dynamic_cast<D*>(pb2);   // pb2 points to a B not a D
}
```
å¤šç»§æ‰¿çš„æ—¶å€™ï¼Œéœ€è¦å†™æ˜ä¸¤æ¬¡è½¬æ¢ï¼ˆå¯ä»¥ç›´æ¥çœ‹docé‡Œçš„ä¾‹å­ï¼‰

### const_cast
ä¸“é—¨ç”¨æ¥ä¿®æ”¹ç±»å‹çš„`const`,`volatile`å’Œ`__unaligned`å±æ€§ã€‚å¸¸é‡**æŒ‡é’ˆå’Œå¼•ç”¨**è¢«è½¬åŒ–æˆéå¸¸é‡çš„æŒ‡é’ˆå’Œå¼•ç”¨ï¼Œå¹¶ä¸”ä»ç„¶æŒ‡å‘åŸæ¥çš„å¯¹è±¡ï¼Œä¸å¯ä»¥ç›´æ¥æ”¹å¸¸é‡å˜é‡
### reinterpret_cast
ä¿®æ”¹æŒ‡é’ˆç±»å‹ï¼ŒåŒ…æ‹¬æŠŠç©ºæŒ‡é’ˆè½¬æ¢æˆç‰¹å®šç±»å‹çš„ç©ºæŒ‡é’ˆã€‚å¦‚åœ¨hashæ˜ å°„ä¸­
``` c++
unsigned short Hash( void *p ) {
   unsigned int val = reinterpret_cast<unsigned int>( p );
   return ( unsigned short )( val ^ (val >> 16));
}
```
ç±»ä¼¼ä¸­æ–‡æ€»ç»“ï¼šhttps://www.cnblogs.com/goodhacker/archive/2011/07/20/2111996.html
## çˆ¶ç±»å¯ä»¥å®ç°çº¯è™šå‡½æ•°ç„¶åå®ä¾‹åŒ–å—
å¤ªéš¾äº†ï¼Œè¿™é¢˜æˆ‘ä¸ä¼š
## å‹å…ƒ
å‹å…ƒå‡½æ•°ï¼šæ™®é€šå‡½æ•°æˆ–è€…ç±»æˆå‘˜å‡½æ•°è®¿é—®å¦ä¸€ä¸ªç±»ä¸­çš„ç§æœ‰æˆ–ä¿æŠ¤æˆå‘˜çš„æœºåˆ¶ï¼Œåœ¨ç±»ä¸­ç”³æ˜`friend <è¿”å›ç±»å‹><å‹å…ƒå‡½æ•°å>(<å‚æ•°è¡¨>)`ï¼Œåœ¨ç±»å¤–å®šä¹‰ã€‚æ³¨æ„ä¸èƒ½æŠŠå…¶ä»–ç±»çš„ç§æœ‰æˆå‘˜å‡½æ•°å£°æ˜ä¸ºå‹å…ƒã€‚
å‹å…ƒç±»ï¼šæˆå‘˜å‡½æ•°å¯ä»¥è®¿é—®æ‰€æœ‰ç§æœ‰å±æ€§ï¼Œæ²¡æœ‰ç»§æ‰¿æ€§å’Œä¼ é€’æ€§
``` c++
class A {
private:
    int myPrivateVariable;
    friend int friend1(A* a); // å‹å…ƒå‡½æ•°
    friend void B::friend2(A* a);
    friend friendClassC; // å‹å…ƒç±»
};
```
## æ™ºèƒ½æŒ‡é’ˆ
ä¸ºè§£å†³åŸæœ‰èµ„æºç®¡ç†å’Œåƒåœ¾å›æ”¶ï¼ˆgarbage-collectionï¼‰ä¸­`new`å’Œ`delete`ä¹‹é—´æŠ›é”™/å‡½æ•°è¿”å›/é‡å¤`delete`çš„é—®é¢˜  
**RAII**ï¼ˆResource Acquisition is initializationï¼‰  
ç”¨å¯¹è±¡ä»£è¡¨èµ„æºï¼ŒæŠŠç®¡ç†èµ„æºçš„ä»»åŠ¡è½¬åŒ–ä¸ºç®¡ç†å¯¹è±¡çš„ä»»åŠ¡ï¼Œå°†èµ„æºçš„è·å–å’Œé‡Šæ”¾ä¸å¯¹è±¡çš„æ„é€ å’Œææ„å¯¹åº”èµ·æ¥ï¼Œä»è€Œç¡®ä¿åœ¨å¯¹è±¡çš„ç”Ÿå­˜æœŸå†…èµ„æºå§‹ç»ˆæœ‰æ•ˆï¼Œå¯¹è±¡é”€æ¯æ—¶èµ„æºå¿…è¢«é‡Šæ”¾
æ ¸å¿ƒæ€æƒ³æ˜¯å¼•ç”¨è®¡æ•°

æœ‰æ—¶é—´å»ºè®®è‡ªå·±çœ‹æ–‡æ¡£
- [auto_ptr](http://www.cplusplus.com/reference/memory/auto_ptr/)(deprecated)
- [shared_ptr](http://www.cplusplus.com/reference/memory/shared_ptr/)
- [weak_ptr](http://www.cplusplus.com/reference/memory/weak_ptr/)
- [unique_ptr](http://www.cplusplus.com/reference/memory/unique_ptr/)

### shared_ptr  
1. å¤šä¸ªæŒ‡é’ˆå¯ä»¥åŒæ—¶æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œä¼šæœ‰å¾ªç¯å¼•ç”¨é—®é¢˜  
``` c++
// ä¸è¦è¿™ä¹ˆåš
class B;
class A
{
public:
 A(  ) : m_sptrB(nullptr) { };
 ~A( )
 {
  cout<<" A is destroyed"<<endl;
 }
 shared_ptr<B> m_sptrB;
};
class B
{
public:
 B(  ) : m_sptrA(nullptr) { };
 ~B( )
 {
  cout<<" B is destroyed"<<endl;
 }
 shared_ptr<A> m_sptrA;
};
//***********************************************************
void main( )
{
 shared_ptr<B> sptrB( new B );
 shared_ptr<A> sptrA( new A );
 sptrB->m_sptrA = sptrA;
 sptrA->m_sptrB = sptrB;
}

```
2. å°½é‡ä¸è¦ä»ä¸€ä¸ªè£¸æŒ‡é’ˆ(naked pointer)åˆ›å»º`shared_ptr`
``` c++
// ä¹Ÿä¸è¦è¿™ä¹ˆåš
void main( )
{
 int* p = new int;
 shared_ptr<int> sptr1( p);
 shared_ptr<int> sptr2( p );
}
```
3. ä½¿ç”¨`make_shared`å®æ¥åŠ é€Ÿåˆ›å»ºçš„è¿‡ç¨‹ï¼šä¸»åŠ¨åˆ†é…å†…å­˜å¹¶ä¸”ä¿å­˜å¼•ç”¨è®¡æ•°,`make_shared`ä»¥ä¸€ç§æ›´æœ‰æ•ˆç‡çš„æ–¹æ³•æ¥å®ç°åˆ›å»ºå·¥ä½œã€‚
``` c++
shared_ptr<int> ptr2 = make_shared<int>(100);
```
æ¥å£
- get è·å–`shared_ptr`ç»‘å®šçš„èµ„æº.
- use_count è·å–å¼•ç”¨è®¡æ•°
- reset é‡Šæ”¾å…³è”å†…å­˜å—çš„æ‰€æœ‰æƒï¼Œå¦‚æœæ˜¯æœ€åä¸€ä¸ªæŒ‡å‘è¯¥èµ„æºçš„`shared_ptr`,å°±é‡Šæ”¾è¿™å—å†…å­˜ã€‚
- æ¯”è¾ƒè¿ç®—ç¬¦operator bool
- unique åˆ¤æ–­æ˜¯å¦æ˜¯å”¯ä¸€æŒ‡å‘å½“å‰å†…å­˜çš„`shared_ptr`
- swap äº¤æ¢ä¸¤ä¸ªæŒ‡é’ˆå†…å®¹
- owner_before
### weak_ptr
`weak_ptr`å¯ä»¥å…±äº«`shared_ptr`æŒæœ‰çš„èµ„æºï¼Œä½†ä¸å¢åŠ å¼•ç”¨è®¡æ•°ï¼ˆæ›´å‡†ç¡®åœ°è¯´æ˜¯å¼ºå¼•ç”¨è®¡æ•°ï¼‰ã€‚å³æä¾›ä¸€ä¸ªï¼ˆ1ï¼‰èƒ½å¤Ÿç¡®å®šå¯¹æ–¹ç”Ÿå­˜ä¸å¦ï¼ˆ2ï¼‰äº’ç›¸ä¹‹é—´ç”Ÿå‘½å‘¨æœŸæ— å¹²æ‰°ï¼ˆ3ï¼‰å¯ä»¥ä¸´æ—¶å€Ÿç”¨ä¸€ä¸ªå¼ºå¼•ç”¨ï¼ˆåœ¨ä½ éœ€è¦å¼•ç”¨å¯¹æ–¹çš„çŸ­æ—¶é—´å†…ä¿è¯å¯¹æ–¹å­˜æ´»ï¼‰çš„æ™ºèƒ½æŒ‡é’ˆ  
``` c++
void main( )
{
 shared_ptr<Test> sptr( new Test ); // ä»¥shared_pträ½œä¸ºå‚æ•°æ„é€ weak_ptr, å¼•ç”¨è®¡æ•°ä¸º1
 weak_ptr<Test> wptr( sptr ); // å¼ºå¼•ç”¨è®¡æ•°ä»ä¸º1ï¼Œå¼±å¼•ç”¨ä¸º1
 weak_ptr<Test> wptr1 = wptr; // å¼ºå¼•ç”¨è®¡æ•°ä»ä¸º1ï¼Œå¼±å¼•ç”¨ä¸º2
 shared_ptr<Test> sptr2 = wptr.lock( ); 
}
```
1. å¯ä»¥è§£å†³`shared_ptr`å¾ªç¯å¼•ç”¨é—®é¢˜
``` c++
class B;
class A
{
public:
 A(  ) : m_a(5)  { };
 ~A( )
 {
  cout<<" A is destroyed"<<endl;
 }
 void PrintSpB( );
 weak_ptr<B> m_sptrB; // ğŸ‘ˆå·®åˆ«åœ¨è¿™é‡Œ
 int m_a;
};
class B
{
public:
 B(  ) : m_b(10) { };
 ~B( )
 {
  cout<<" B is destroyed"<<endl;
 }
 weak_ptr<A> m_sptrA; // ğŸ‘ˆ
 int m_b;
};

void A::PrintSpB( )
{
 if( !m_sptrB.expired() )
 {  
  cout<< m_sptrB.lock( )->m_b<<endl;
 }
}

void main( )
{
 shared_ptr<B> sptrB( new B );
 shared_ptr<A> sptrA( new A );
 sptrB->m_sptrA = sptrA;
 sptrA->m_sptrB = sptrB;
 sptrA->PrintSpB( ); 
}
```
2. `weak_ptr`ä¸æ”¯æŒæ™®é€šæŒ‡é’ˆåŒ…å«çš„`*ï¼Œ->`æ“ä½œï¼Œå®ƒå¹¶ä¸åŒ…å«èµ„æºæ‰€ä»¥ä¹Ÿä¸å…è®¸æ“ä½œèµ„æºï¼Œä½¿ç”¨æ—¶éœ€è¦`lock()`å¾—åˆ°`shared_ptr`æˆ–è€…ç›´æ¥å°†`weak_ptr`è½¬å‹ä¸º`shared_ptr`
``` c++
void main( )
{
 shared_ptr<Test> sptr( new Test );
 weak_ptr<Test> wptr( sptr );
 shared_ptr<Test> sptr2 = wptr.lock( );
}
```
### unique_ptr
åœ¨ä»»ä½•æ—¶é—´ç‚¹ï¼Œèµ„æºåªèƒ½å”¯ä¸€åœ°è¢«ä¸€ä¸ª`unique_ptr`å æœ‰ã€‚å½“`unique_ptr`ç¦»å¼€ä½œç”¨åŸŸï¼Œæ‰€åŒ…å«çš„èµ„æºè¢«é‡Šæ”¾ã€‚å¦‚æœèµ„æºè¢«å…¶å®ƒèµ„æºé‡å†™äº†ï¼Œä¹‹å‰æ‹¥æœ‰çš„èµ„æºå°†è¢«é‡Šæ”¾ã€‚æ‰€ä»¥å®ƒä¿è¯äº†ä»–æ‰€å…³è”çš„èµ„æºæ€»æ˜¯èƒ½è¢«é‡Šæ”¾
``` c++
unique_ptr<int[ ]> uptr( new int[5] );
```
æ— æ³•è¿›è¡Œå¤åˆ¶æ„é€ ï¼Œæ— æ³•è¿›è¡Œå¤åˆ¶èµ‹å€¼æ“ä½œã€‚å³æ— æ³•ä½¿ä¸¤ä¸ª`unique_ptr`æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯å¯ä»¥è¿›è¡Œç§»åŠ¨æ„é€ å’Œç§»åŠ¨èµ‹å€¼æ“ä½œ
æ¥å£
- reset, get, operator bool ç”¨æ³•åŒ`shared_ptr`
- release ä»…ä»…é‡Šæ”¾æ‰€æœ‰æƒä½†ä¸é‡Šæ”¾èµ„æº
## constå‡½æ•°
ä¸ºäº†ä¿è¯constå¯¹è±¡çš„å¸¸é‡æ€§ï¼Œç¼–è¯‘å™¨é¡»åŒºåˆ†ä¸å®‰å…¨ä¸å®‰å…¨çš„æˆå‘˜å‡½æ•°ï¼ˆå³åŒºåˆ†è¯•å›¾ä¿®æ”¹ç±»å¯¹è±¡ä¸ä¸ä¿®æ”¹ç±»å¯¹è±¡çš„å‡½æ•°ï¼‰ï¼Œè€Œåªæœ‰è¢«å£°æ˜ä¸ºconstçš„æˆå‘˜å‡½æ•°æ‰èƒ½è¢«ä¸€ä¸ªconstç±»å¯¹è±¡è°ƒç”¨ï¼Œéå¸¸é‡æˆå‘˜å‡½æ•°ä¸èƒ½è¢«å¸¸é‡æˆå‘˜å¯¹è±¡è°ƒç”¨
``` c++
class Point{
    public:
    int GetX() const; // åœ¨å‡½æ•°å¤´åé¢é™„åŠ constå…³é”®å­—å³å¯
    int GetY() const;
    void SetPt (int, int);
    void OffsetPt (int, int);
    private:
    int xVal, yVal;
};Â 
void main {
    const Point pt1;
    pt1.GetX(); // å¯ä»¥
    pt1.SetPt(0, 0); // ä¸å¯ä»¥
}
```

ä¸€äº›ä½ å¯èƒ½æ„Ÿå…´è¶£çš„bonuså°é—®é¢˜
- å¤šæ€ï¼ˆåŸç†ï¼‰
- è™šæŒ‡é’ˆ è™šè¡¨ è™šå‡½æ•°
- æˆå‘˜å‡½æ•°åˆå§‹åŒ–åˆ—è¡¨å’Œç›´æ¥å¤åˆ¶çš„åŒºåˆ«
- STLçš„åº•å±‚å®ç°å’Œå…·ä½“ç‰¹æ€§
- è®¾è®¡æ¨¡å¼
- c++æ–°ç‰¹æ€§
